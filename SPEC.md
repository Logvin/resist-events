# Project Spec

## Original Prompts
<!-- Paste your prompts from claude.ai below -->
phoenixresist.events

Purpose:
There are many organizations throughout town that hold events, rallies, protests, or marches. Finding these events can prove to be hard, as each organization has different communication methods. We built this site to help create a single event calendar for our community.

Site Design:
Visitors to the site should see a few links or buttons at the top that when clicked will open a modal window with information. One will be “Our Purpose”, another will be “Today’s Events”, another “Full Event Calendar”, “Participating Organizations”, and another “Sync with my smartphone”. In the very top right should be a button titled “Organizer Login” and a button to enroll new organizations. 

When the Organizer Login button is clicked, users will be redirected to a separate page at domain.com/organizers which will utilize Cloudflare’s SSO authorization methods like Google, Apple, and OTP. Once logged in, organizers will be shown the same page as user, but with additional buttons for “Register a new event”, “Modify an existing event”, “My Profile” and “Contact us”.

Register a new event - this section should allow organizers to enter in data they wish to share for their event. Date/Time pickers (including start and end times), event title, sponsoring organization (which by default should be filled in with the public name linked to the organizer that signed up IE: organizationname@gmail.com might be the login but the public name they chose may be Organization Name. If the sponsoring organization is the logged in organizer, when the event is viewed it should have a check mark of some sort with a mouse over that indicates the event was added by the hosting organization. Other inputs should be provided for things like event description, link to a flyer (not required), link to the organizer’s website (either for that specific event or for the organization itself) (not required), parking information (not required), link to register (not required) with a check box that allows them to indicate that registration is required. Address should be a required input, with built in validation; however, if organizers wish to require that users register to see the address, there should be a check box to indicate that which disables the requirement to input an address, blanks the address input, and disables it when selected. There should be a section titled something like “What to bring” that has a bunch of pre-filled common items like “Sunscreen”, “Hearing Protection”, “Water”, “Protest Signs”. Ensure there is a button that can be hit to add additional items that the organizer can manually enter. This should be followed by a section titled “What NOT to bring” with things like “Visible Weapons”, “Concealed Carry Weapons”, megaphones or speakers, and a similar button to add additional custom items. The last input should be a larger text input that allows organizers to enter in “Notes from the Organizer”. Finally, the bottom should have a few buttons - Submit Now, and  Save for Later. The buttons both save the information in the database, with the status of the event for the first button being “Submitted for Review”, and the second being something like Draft Event.

Modify an existing event - this section should present a list of events that the organizer has previously created. It should be in a list format, with the date, name of event, and current status. There should be a button in the top right that says “Show Archived Events”, which when hit will add the archived events to the list - they should be hidden by default. Once the show archived events button is hit, it should also change to “Hide Archived Events” which hides the events from the list. The list should show the 20 events that are either the most recent or in the future, sorted by date future first then past. If there are more events, have a button that when pressed loads 20 more events to the list, etc. Each item on the list should have a button to edit the event details, clone event, or archive the event. If the Archive Event button is hit, it should give a confirmation/warning verifying that archiving an event is permanent, and that archive events will be automatically deleted after X time period. The X time period should be a variable stored outside of the code, with the default being 12 months. If the Edit button is hit, it should display an identical form to the new event button with the same inputs and buttons. If the Clone Event button is hit, it should take that event’s details and open the New Event form with all of the details of the previous event pre-filled in EXCEPT for the Date picker which should be empty.

Contact Us - This page should be similar to the event list, but be a list of topics, sorted by “Date Created” (newest on top), and provide info on “Last modified by” which should have the public name of the responding person, and the date/time it was modified. There should be a “New Message” button, that when hit will open up a modal that has inputs for Topic and message, followed by a submit and a cancel button. When submitted, the inputted data should be saved in the database. The list should only display topics that were created by the organizer	, or created by an admin to that specific organizer. When organizer clicks on a previously created topic, it should display a history of the conversation under that topic between the organizer and the admins, sorted by date time with oldest on the bottom. There should be an input box on top that allows the organizer to add another message to the topic conversation, with a submit and cancel button next to it. Finally, there should be a button on the topic list to archive that topic, which hides it from the list. Ensure there is similar functionality for topics to archive like with the event lists.

My Profile - This should be a modal that allows an organizer to update their public name for their organization, as well as a link to their website and socials like Facebook, Insta, Snap, Signal, Reddit, etc.

There are several sections that I have not defined yet, for now feel free to throw some mock ups in there and we can tweak later. For the time being, let’s focus on the site design, and we can worry about the hosting, database, GitHub, stuff later. Assume that we have passed authentication via Google already and that I am a logged in organizer under the ID temperisingindivisible@gmail.com with a public name of “Tempe Rising Indivisible”.


This site’s code base will be stored on Github so it can be open source. This means that the name of the site, domain name, etc. should be variables stored outside of the code and referenced as needed. It should be designed to deploy on Cloudflare Pages from the Github repo, and store its data in Cloudflare’s D1 databases. The site should be mobile friendly.


Alright, lets put a plan together for next steps. I'm not a software dev, so you may need to walk me through some of this. Feel free to recommend things I may miss.
1. Let's remove the stock data from the demo, and put it into a Cloudflare D1 SQL database. Rather than be phoenix specific, let use a fictional city - lets say Camelot. Feel free to have fun with the theme - on the Our Purpose section put a quote in from Dennis in Monty Python and the quest for the holy grail: "Strange women lying in ponds distributing swords is no basis for a system of government. Supreme executive power derives from a mandate from the masses, not from some farcical aquatic ceremony. You can’t expect to wield supreme executive power just ’cause some watery tart threw a sword at you!"
2. I would like to publish this open source on Github - but I'm not very good at Github. I use a Macbook, so instructions for that are preferred. If there are variables that we should not store in the database but want to keep a secret, I would like to use Cloudflare Secrets.
3. Once we have this published on Github, I would like to ensure that when we do an update you provide the info I need to make the commits on Github - you know, so I can look like a cool web dev guy instead of just a cool vibe coder ;)
4. Eventually I would like to utilize Cloudflare's Identity Providers to allow SSO. Since each organization may have multiple people who want to post as the organization, we should probably split up organizations and users. Only admins and organizers will be able to log in and see which user posted as the organization - externally it will all appear as the organizer. One organizer may represent multiple organizations. For now though - when the page first loads, let have a modal pop up that blurs the background and indicates this is a demo environment. Give the visitor the option to visit the site as a guest, an organizer, or an admin - once selected, the rest of that session should be from that viewpoint. Make up some sample users, organizations, and admins for the demo database. Maybe indicate somewhere on the top of the page it is in demo mode.
5. I'd like to explore ways that we would let others deploy this as easy as possible, so keep that in mind. If someone were to clone my github repo to their cloudflare worker, we would need to document the steps to get the database and secrets created. I'm thinking we would have some kind of wizard that would walk through creating the app for a new city on the first visit - or allowing the user to skip the wizard and just use the demo mode.
I made this list numbered, but I don't really care about the order - why dont you build us a task list of to do items and as we check off one task you will move us to the next one.



## Reference
<!-- Paste the link to the static page here -->
https://146af3bc.phoenix-resist-events-test.pages.dev/phoenixresist-events

## Notes
<!-- Any additional context -->
I have a Cloudflare free account, but plan on getting it upgraded to a business account w/ their project gemini once I launch this for my city (phoenix).  I have a GitHub pro account too. I have node.js and wrangler already installed on my Mac.